# Variables substituted by the autoconf configure script:

SHELL = @SHELL@

CC = @CC@
CFLAGS = @CFLAGS@
CPPFLAGS = -I../src/util -I../src/matrices -I../src/matrixio @CPPFLAGS@
DEFS = @DEFS@ -DMPB_VERSION='"'"@MPB_VERSION@"'"'
LDFLAGS = @LDFLAGS@
LIBS = @LIBS@
RANLIB = @RANLIB@
@SET_MAKE@

INSTALL = @INSTALL@
prefix = @prefix@
mandir = @mandir@
# c.f. AC_ARG_PROGRAM autoconf docs:
transform=@program_transform_name@

MYLIBS = ../src/matrixio/matrixio.a ../src/matrices/matrices.a \
         ../src/util/util.a 

all: @BUILD_MPB_DATA@

libs:

mpb-data: mpb-data.o $(MYLIBS)
	$(CC) $(CFLAGS) $(LDFLAGS) mpb-data.o $(MYLIBS) $(LIBS) -o $@

.c.o:
	$(CC) $(DEFS) $(CPPFLAGS) -c $(CFLAGS) $< -o $@

install: install-@BUILD_MPB_DATA@

install-: # dummy target for when BUILD_MPB_DATA is ""

install-mpb-data: mpb-data
	$(INSTALL) -d $(prefix)/bin
	$(INSTALL) -m 0755 -s mpb-data $(prefix)/bin/`echo mpb-data|sed '$(transform)'`
	$(INSTALL) -d $(mandir)/man1
	$(INSTALL) -m 0644 mpb-data.1 $(mandir)/man1

clean: 
	rm -f mpb-data mpb-data.o core
